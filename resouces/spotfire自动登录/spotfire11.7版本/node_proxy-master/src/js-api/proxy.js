!function(){var e=0,n=1,t=2,o=3,s=4,r=5,i=6,a=99,u=100,c=w("analysis"),l=w("apiVersion"),p=w("zoneCheck"),d=function(e){for(var n=e+"=",t=decodeURIComponent(document.cookie).split(";"),o=0;o<t.length;o++){for(var s=t[o];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(n))return s.substring(n.length,s.length)}return""}("zoneCheck"),m=w("mashupDomain"),g={},f=!1;S(a);var R=new XMLHttpRequest;function h(){var t=new XMLHttpRequest;t.open("POST","/spotfire/wp/js-api/initiate",!0),t.setRequestHeader("Content-Type","application/json"),t.onload=function(){t.status>=200&&t.status<400?function(t){if(t.hasAccess||!t.isAnonymous){var o=new XMLHttpRequest;o.open("GET","/spotfire/wp/GetJavaScriptApi.ashx?Version="+l,!0),o.onload=function(){o.status>=200&&o.status<400?S(t.hasAccess?e:n,null,o.responseText):503===o.status?S(s):404===o.status?S(i):S(u)},o.onerror=function(){S(u)},C(o),o.send()}else if(t.hasAccess||!t.isAnonymous||t.loginPageUrl||f)S(r,y(t.loginPageUrl));else if(t.noSsoLoginForAnonymousWithoutAccess)S(r);else{var a=new XMLHttpRequest;a.open("GET","/spotfire/sf_security_check_sso",!0),a.onload=function(){a.status>=200&&a.status<400?(f=!0,h()):401===a.status?S(r):S(u)},a.onerror=function(){S(u)},C(a),a.send()}}(JSON.parse(t.responseText)):_(t)},t.onerror=_,C(t),t.send(JSON.stringify({analysis:c}))}function y(e){if(void 0!==w("redirect")||!e)return e;var n=(new Date).getTime(),t="zoneCheck="+n;"https:"===document.location.protocol&&(t+=";SameSite=None;Secure"),document.cookie=t;var o=document.location.pathname+"?5e01f3f#redirect=1&analysis="+encodeURIComponent(c)+"&mashupDomain="+encodeURIComponent(m)+"&zoneCheck="+encodeURIComponent(n)+"&apiVersion="+encodeURIComponent(l);return e+"?targetUrl="+encodeURIComponent(o)}function S(u,c,l){var f={};if(u===e?(f.scriptCode=l,f.response={status:"OK"}):u===n&&l?(f.scriptCode=l,f.response={status:"ACCESS_DENIED",message:g.JS_API_AccessDenied}):u===r?(f.loginPageUrl=c,f.loginText=g.JS_API_LoginText,f.loginButton=g.JS_API_LoginButton,c||(f.response={status:"ERROR",message:g.JS_API_NoLoginForm})):u===t?(f.tryReload=!0,f.response={status:"ERROR",message:(g.JS_API_ThirdPartyCookies||"Third party cookies must be allowed for domain '{0}'.").replace("{0}",document.location.origin)}):u===s?f.response={status:"ERROR",message:g.JS_API_NoWebPlayerNodes}:u===o?f.response={status:"ERROR",message:g.JS_API_IncorrectPath}:u===i?f.response={status:"ERROR",message:g.JS_API_ApiVersionNotFound}:u===a?f.proxyLoaded=!0:f.response={status:"ERROR",message:g.JS_API_CommunicationError||"Unkown error when communicating with the Spotfire Server"},!w("redirect")||p&&p===d)window.parent!==window?window.parent.postMessage(JSON.stringify(f),"*"):window.opener?window.opener.postMessage(JSON.stringify(f),"*"):(document.getElementById("loginOkCloseButton").innerText=g.JS_API_CloseWindow,document.getElementById("loginOkText").innerText=g.JS_API_LoginOK,document.getElementById("loginOk").style.display="block");else{var R=g.JS_API_SecurityWarning||"";R=(R=R.replace("{0}","<span style=\"font-family:'Courier New', Courier, monospace;font-weight:bold;line-height:2;\">"+h(m)+"</span>")).replace("{1}","<span style=\"font-family:'Courier New', Courier, monospace;font-weight:bold;line-height:2;\">"+h(document.location.origin)+"</span>"),document.getElementById("securityZoneErrorText").innerHTML=R,document.getElementById("securityZoneErrorCloseButton").innerText=g.JS_API_CloseWindow,document.getElementById("securityZoneError").style.display="block"}function h(e){var n=document.createElement("div");return n.textContent=e,n.innerHTML}}function w(e){var n=new RegExp("[#&]"+e+"=([^&#]*)").exec(window.location.hash);if(n&&n[1])return decodeURIComponent(n[1].replace(/\+/g," "))}function _(e){if(e)if(401===e.status){var n=e.getAllResponseHeaders(),s=new RegExp('SF-Web location="([^"]*)"').exec(n);s&&s[1]?S(r,y(s[1])):S(r)}else 400===e.status?S(o):403===e.status?S(t):S(u);else S(u)}function C(e){e.setRequestHeader("X-Requested-With","XMLHttpRequest");var n=function(e){var n=null;if(document.cookie&&""!==document.cookie){var t,o,s=document.cookie.split(";");for(t=0;t<s.length;t++)if((o=s[t].trim()).substring(0,e.length+1)===e+"="){n=decodeURIComponent(o.substring(e.length+1));break}}return n}("XSRF-TOKEN");n&&e.setRequestHeader("X-XSRF-TOKEN",n)}R.open("GET","/spotfire/rest/pub/localizedHeaderLabels",!0),R.setRequestHeader("Content-Type","application/json"),R.onload=function(){R.status>=200&&R.status<400?(g=JSON.parse(R.responseText),h()):_(R)},R.onerror=_,C(R),R.send()}();